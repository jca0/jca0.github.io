<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ASCII Duck</title>
    <style>
        body {
            /* Using a custom cursor shape since we can't load an image */
            cursor: none;
            margin: 0;
            overflow: hidden;
            background: #f0f0f0;
        }

        #duck {
            position: absolute;
            bottom: 10px;
            left: 0;
            font-size: 16px;
            line-height: 1;
            font-family: monospace;
            white-space: pre;
            user-select: none;
            transform-origin: center;
        }

        #cursor {
            position: fixed;
            pointer-events: none;
            font-size: 24px;
            transform: translate(-50%, -50%);
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div id="duck"></div>
    <div id="cursor">ðŸ¥–</div>
    <audio id="quack-sound" src="quack.mp3" preload="auto"></audio>

    <script>
        const duck = document.getElementById('duck');
        const cursor = document.getElementById('cursor');
        const quackSound = document.getElementById('quack-sound');

        // Duck ASCII art - one facing left, one facing right
        const duckLeftOpen = `
            __
          >(o )__
           ( ._> /
            \`---'`;

        const duckLeftClosed = `
            __
          -(o )__
           ( ._> /
            \`---'`;

        const duckRightOpen = `
           __
        __(o <
      \\ <._) 
       '---'`;

        const duckRightClosed = `
           __
        __(o -
      \\ <._) 
       '---'`;

        let duckFramesLeft = [duckLeftOpen, duckLeftClosed];
        let duckFramesRight = [duckRightOpen, duckRightClosed];
        let currentFrame = 0;
        let facingRight = false;

        let duckX = 0;
        let cursorX = 0;
        let cursorY = 0;
        let isQuacking = false;

        let frameDelay = 10;
        let frameCounter = 0;

        function animateDuck() {
            frameCounter++;

            // Change the duck's frame when the frame counter reaches the frame delay
            if (frameCounter >= frameDelay) {
                currentFrame = (currentFrame + 1) % 2;
                const frames = facingRight ? duckFramesRight : duckFramesLeft;
                duck.textContent = frames[currentFrame];
                frameCounter = 0;
            }

            // Adjust for the duck's width to center it on the cursor
            let duckWidth = duck.offsetWidth;
            let dx = cursorX - (duckX + duckWidth / 2);
            let speed = 2;

            // Update duck direction based on movement
            if (dx > 0 && !facingRight) {
                facingRight = true;
            } else if (dx < 0 && facingRight) {
                facingRight = false;
            }

            if (Math.abs(dx) > speed) {
                duckX += speed * Math.sign(dx);
                isQuacking = false;
            } else {
                duckX += dx;
                if (!isQuacking) {
                    quackSound.play().catch(e => console.log('Audio play failed:', e));
                    isQuacking = true;
                }
            }

            duck.style.left = duckX + 'px';

            // Update custom cursor position
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';

            requestAnimationFrame(animateDuck);
        }

        // Update cursor position whenever the mouse moves
        document.addEventListener('mousemove', function(e) {
            cursorX = e.clientX;
            cursorY = e.clientY;
        });

        // Start the duck animation
        animateDuck();
    </script>
</body>
</html>